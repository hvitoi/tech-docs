# AWS::ElasticLoadBalancingV2::TargetGroup

## Properties

- <https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-elasticloadbalancingv2-targetgroup.html>

```yaml
Type: AWS::ElasticLoadBalancingV2::TargetGroup
Properties:
  HealthCheckEnabled: Boolean
  HealthCheckIntervalSeconds: Integer
  HealthCheckPath: String
  HealthCheckPort: String
  HealthCheckProtocol: String
  HealthCheckTimeoutSeconds: Integer
  HealthyThresholdCount: Integer
  IpAddressType: String
  Matcher:
    Matcher
  Name: String
  Port: Integer
  Protocol: String
  ProtocolVersion: String
  Tags:
    - Tag
  TargetGroupAttributes:
    - TargetGroupAttribute
  Targets:
    - TargetDescription
  TargetType: String
  UnhealthyThresholdCount: Integer
  VpcId: String
```

### TargetGroupAttributes

- **stickiness.enabled**
  - Also known as `session affinity`
  - Stickiness can be enabled for ALB and CLB
  - To implement `session affinity/stickiness`, a cookie is used with an expiration date (this way user won't lose the session data)
    - AWSALBAPP: `application-based` (generated by the app)
    - AWSALB: `duration-based` (generated by the lb)
  - The session affinity is enabled at the target group
- **deregistration_delay.timeout_seconds**
  - `Connection Draining` (CLB) or `Deregistration Delay` (ALB & NLB)
  - It's the time to wait for an instance to be drained (to no long accept new requests)
  - It's necessary when an instance will be removed from the target group
  - Default is 300 seconds

### TargetType

- `Instance`
- `IP` (private IP)
- `Lambda function`

# Templates

- <https://github.com/actions/template>

## checkout

- Checkout the repository

```yaml
steps:
  - name: Checkout the repo!
    uses: actions/checkout@v3
```

## upload-artifact

```yaml
- name: Upload package
  uses: actions/upload-artifact@v3
  with:
    name: built-packages
    path: ${{ github.workspace }}/*.pkg.tar.*
```

## github-script

- Run javascript code to fetch gh api

```yaml
- name: Verify PR number
  uses: actions/github-script@v5
  with:
    github-token: ${{ secrets.GITHUB_TOKEN }}
    result-encoding: string
    script: |
      const response = await github.rest.pulls.get({
        owner: context.repo.owner,
        repo: context. repo.repo,
        pull_number: ${{ github.event.inputs.PR_number }}
      });
    if (response.data.number !== ${{ github.events.inputs.PR_number }}) {
      throw new Error("Invalid PR");
    } else {
      console.log("PR ref: " + response.data.head.ref);
      return response.data.head.ref;
    }
```

```javascript
github.rest.issues.createComment({
  issue_number: ${{ github.event.inputs.PR_number }},
  owner: context.repo.owner,
  body: output
})

```

## deploy-pages

- Expects an artifact named `github-pages` to have been created prior to execution.
- Outputs: `page_url`

```yaml
deploy:
  runs-on: ubuntu-latest
  needs: build
  environment:
    name: github-pages
    url: ${{ steps.deployment.outputs.page_url }}
  steps:
    - name: Deploy to GitHub Pages
      id: deployment
      uses: actions/deploy-pages@v2
```
